<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Epoch (and baseline) pupil data based on custom event message structure — epoch • eyeris</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Epoch (and baseline) pupil data based on custom event message structure — epoch"><meta name="description" content="Intended to be used as the final preprocessing step. This function creates
data epochs of either fixed or dynamic durations with respect to provided
events and time limits, and also includes an intuitive metadata parsing
feature where additional trial data embedded within event messages can easily
be identified and joined into the resulting epoched data frames."><meta property="og:description" content="Intended to be used as the final preprocessing step. This function creates
data epochs of either fixed or dynamic durations with respect to provided
events and time limits, and also includes an intuitive metadata parsing
feature where additional trial data embedded within event messages can easily
be identified and joined into the resulting epoched data frames."><meta property="og:image" content="http://shawnschwartz.com/eyeris/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">eyeris</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/preproc-workflow.html">preproc-workflow</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/shawntz/eyeris/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Epoch (and baseline) pupil data based on custom event message structure</h1>
      <small class="dont-index">Source: <a href="https://github.com/shawntz/eyeris/blob/HEAD/R/epoch.R" class="external-link"><code>R/epoch.R</code></a></small>
      <div class="d-none name"><code>epoch.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Intended to be used as the final preprocessing step. This function creates
data epochs of either fixed or dynamic durations with respect to provided
<code>events</code> and time <code>limits</code>, and also includes an intuitive metadata parsing
feature where additional trial data embedded within event messages can easily
be identified and joined into the resulting epoched data frames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">epoch</span><span class="op">(</span></span>
<span>  <span class="va">eyeris</span>,</span>
<span>  <span class="va">events</span>,</span>
<span>  limits <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  label <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calc_baseline <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  apply_baseline <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  baseline_type <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"sub"</span>, <span class="st">"div"</span><span class="op">)</span>,</span>
<span>  baseline_events <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  baseline_period <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  hz <span class="op">=</span> <span class="cn">NULL</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-eyeris">eyeris<a class="anchor" aria-label="anchor" href="#arg-eyeris"></a></dt>
<dd><p>An object of class <code>eyeris</code> derived from <code><a href="https://rdrr.io/r/base/load.html" class="external-link">load()</a></code>.</p></dd>


<dt id="arg-events">events<a class="anchor" aria-label="anchor" href="#arg-events"></a></dt>
<dd><p>Either (1) a single string representing the event message to
perform trial extraction around, using specified <code>limits</code> to center the epoch
around or no <code>limits</code> (which then just grabs the data epochs between each
subsequent event string of the same type); (2) a vector containing both
<code>start</code> and <code>end</code> event message strings – here, <code>limits</code> will be ignored and
the duration of each trial epoch will be the number of samples between each
matched <code>start</code> and <code>end</code> event message pair; or (3) a list of 2 dataframes
that manually specify start/end event timestamp-message pairs to pull out of
the raw timeseries data – here, it is required that each raw timestamp and
event message be provided in the following format:</p>
<p><code>list(data.frame(time = c(...), msg = c(...)),</code>
<code>data.frame(time = c(...), msg = c(...)))</code></p>
<p>where the first data.frame indicates the <code>start</code> event timestamp and message
string pairs, and the second data.frame indicates the <code>end</code> event timestamp
and message string pairs.</p>
<p>For event-modes <code>1</code> and <code>2</code>, the way in which you pass in the event message
string must conform to a standardized protocol so that <code>eyeris</code> knows how to
find your events and (optionally) parse any included metadata into the tidy
epoch data outputs. You have two primary choices: either (a) specify a string
followed by a <code>*</code> wildcard expression (e.g., <code>"PROBE_START*</code>), which will
match any messages that have "PROBE_START ..." (... referring to potential
metadata, such as trial number, stim file, etc.); or (b) specify a string
using the <code>eyeris</code> syntax: (e.g., <code>"PROBE_{type}_{trial}"</code>), which will match
the messages that follow a structure like this "PROBE_START_1" and
"PROBE_STOP_1", and generate two additional metadata columns: <code>type</code> and
<code>trial</code>, which would contain the following values based on these two example
strings: <code>type</code>: <code>('START', 'STOP')</code>, and <code>trial</code>: <code>(1, 1)</code>.</p></dd>


<dt id="arg-limits">limits<a class="anchor" aria-label="anchor" href="#arg-limits"></a></dt>
<dd><p>A vector of 2 values (start, end) in seconds, indicating where
trial extraction should occur centered around any given <code>start</code> message
string in the <code>events</code> parameter.</p></dd>


<dt id="arg-label">label<a class="anchor" aria-label="anchor" href="#arg-label"></a></dt>
<dd><p>An (optional) string you can provide to customize the name of
the resulting <code>eyeris</code> class object containing the epoched data frame. If
left as <code>NULL</code> (default), then list item will be called <code>epoch_xyz</code>, where
<code>xyz</code> will be a sanitized version of the original <code>start</code> event string you
provided for matching. If you choose to specify a <code>label</code> here, then the
resulting list object name will take the form: <code>epoch_label</code>.</p></dd>


<dt id="arg-calc-baseline">calc_baseline<a class="anchor" aria-label="anchor" href="#arg-calc-baseline"></a></dt>
<dd><p>A flag indicated whether to perform baseline correction.
Note, setting <code>calc_baseline</code> to TRUE alone will only compute the baseline
period, but will not apply it to the preprocessed timeseries unless
<code>apply_baseline</code> is also set to TRUE.</p></dd>


<dt id="arg-apply-baseline">apply_baseline<a class="anchor" aria-label="anchor" href="#arg-apply-baseline"></a></dt>
<dd><p>A flag indicating whether to apply the calculated
baseline to the pupil timeseries. The baseline correction will be applied to
the pupil from the latest preprocessing step.</p></dd>


<dt id="arg-baseline-type">baseline_type<a class="anchor" aria-label="anchor" href="#arg-baseline-type"></a></dt>
<dd><p>Whether to perform <em>subtractive</em> (<code>sub</code>) or <em>divisive</em>
(<code>div</code>) baseline correction. Defaults to <code>sub</code>.</p></dd>


<dt id="arg-baseline-events">baseline_events<a class="anchor" aria-label="anchor" href="#arg-baseline-events"></a></dt>
<dd><p>Similar to <code>events</code>, <code>baseline_events</code>, you can supply
either (1) a single string representing the event message to center the
baseline calculation around, as indicated by <code>baseline_period</code>; or (2) a
single vector containing both a <code>start</code> and an <code>end</code> event message string –
here, <code>baseline_period</code> will be ignored and the duration of each baseline
period that the mean will be calculated on will be the number of samples
between each matched <code>start</code> and <code>end</code> event message pair, as opposed to a
specified fixed duration (as described in 1). Please note, providing a list
of trial-level start/end message pairs (like in the <code>events</code> parameter) to
manually indicate unique start/end chunks for baselining is currently
unsupported. Though, we intend to add this feature in a later version of
<code>eyeris</code>, given it likely won't be a heavily utilized / in demand feature.</p></dd>


<dt id="arg-baseline-period">baseline_period<a class="anchor" aria-label="anchor" href="#arg-baseline-period"></a></dt>
<dd><p>A vector of 2 values (start, end) in seconds,
indicating the window of data that will be used to perform the baseline
correction, which will be centered around the single string "start" message
string provided in <code>baseline_events</code>. Again, <code>baseline_period</code> will be
ignored if both a "start" <strong>and</strong> "end" message string are provided to the
<code>baseline_events</code> argument.</p></dd>


<dt id="arg-hz">hz<a class="anchor" aria-label="anchor" href="#arg-hz"></a></dt>
<dd><p>Data sampling rate. If not specified, will use the value contained
within the tracker's metadata.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>Updated <code>eyeris</code> object with dataframes containing the epoched data
(<code>epoch_</code>).</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>

    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shawn Tyler Schwartz.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

